<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.timer.mapper.TodoClassifyMapper">
   <select id="findUserTags" parameterType="HashMap" resultMap="HashMap">
       SELECT
           u.id,
           (
           SELECT
               GROUP_CONCAT(
                   concat('[',
                       JSON_OBJECT(
                           'id',t.id,
                           'name',t.name,
                           'color',t.color),
                       ']')
                   )
            FROM todoClassify t
            WHERE JSON_CONTAINS(u.tags, CONVERT(t.id,CHAR ))) AS tags
       FROM user u WHERE id=#{userId};
   </select>
</mapper>